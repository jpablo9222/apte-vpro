INSERTAR_C 		PROC NEAR
				PUSHA			
				MOVM APUNTADOR_CAD, POS_INSERT
				MOVM APUNTADOR_CAD, INICIO_CAD
				MOV CX, LONGSTRING2
ETIQUETA:		INC APUNTADOR_CAD
				MOV BX, APUNTADOR_CAD
				CMP BX CANT_CAR
				JE  
				MOV AL, CADENA_DEST[BX]
				CMP AL, 00H
				JNE ETIQUETA
				MOV INICIO_NULL, BX
				RESTAM INICIO_NULL, INICIO_CAD
ENCONTRO:		INC CANT_NULL
				ADD BX, 1
				MOV AL, CADENA_DEST[BX]
				CMP AL, 00H
				JE ENCONTRO
				MOV BX, INICIO_CAD
				LIMPIAR CADENA_AUX, LONG_AUX
				COPIAR_CAD CADENA_DEST[BX], CADENA_AUX, LONG_COP
				ADD BX, CANT_NULL
				MOV INICIO_CAD, BX
				COPIAR_CAD CADENA_AUX, CADENA_DEST[BX], LONG_COP
				SUB CX, CANT_NULL
				LOOP CX
				
				
				RESTAM CANT_CAR, INICIO_CAD
				MOV BX, INICIO_CAD
				COPIAR_CAD CADENA_DEST[BX], CADENA_AUX, LONG_COP
				MOV BX, POS_INSERT
				COPIAR_CAD S_2_INS, CADENA_DEST[BX], LONG_STRING2
				ADD BX, LONG_STRING2
				COPIAR_CAD CADENA_AUX, CADENA_DEST[BX], LONG_COP
				LIMPIAR CADENA_AUX, LONG_AUX
				SUMAM CANT_CAR, LONG_STRING2
				MOVM SUMA, CANT_CAR
				POPA
				RET
				INSERTAR_C		ENDP

INSERTAR_CAD	PROC NEAR
				PUSHA
				LIMPIAR CADENA_AUX, LONG_AUX
				RESTAM CANT_CAR, APUNTADOR_CAD
				MOV BX, APUNTADOR_CAD
				COPIAR_CAD CADENA_DEST[BX], CADENA_AUX, LONG_COP
				COPIAR_CAD S_2_INS, CADENA_DEST[BX], LONG_STRING2
				ADD BX, LONG_STRING2
				COPIAR_CAD CADENA_AUX, CADENA_DEST[BX], LONG_COP
				LIMPIAR CADENA_AUX, LONG_AUX
				SUMAM CANT_CAR, LONG_STRING2
				MOVM SUMA, CANT_CAR
				POPA
				RET
INSERTAR_CAD	ENDP

SET_STR			PROC  NEAR
				LEA   SI, STRING
				MOVM  CANT_CAR, COP_CANT_CAR
				SUB	  COP_CANT_CAR,1
RECORRER1:		CMP	  SI, COP_CANT_CAR
				JE    FIN
				MOV	  AL, [SI]
				MOV   CHAR, AL
				GET_CUR
				CMP   DL, 79
				JE	  VERIFICAR
				CMP	  CHAR, 27
				JE	  ENTERR
IMPR:			DESPC CHAR
				INC   SI
				JMP   RECORRER1
ENTERR:			INC   SI
				MOV   LARGO, 78
				SUB   LARGO, DL
				MOV	  CX, LARGO
				MOV   APUNTADOR_CAD, SI
				MOVM  STRING, CADENA_DEST
VOLVER1:		INSERT_C 00H 
				INC   APUNTADOR_CAD
				LOOP VOLVER1
VERIFICAR:		CMP   CHAR, 32
				JE	  IMPR
				CMP   CHAR, 00H
				JE    IMPR
NO_SPACE:		DEC   SI
				INC   NULL_A_IMP
				MOV   AL, [SI]
				CMP   AL, 32
				JNE   NO_SPACE
				ADD   SI, 1
				MOV   APUNTADOR_CAD, SI
				MOV	  CX, NULL_A_IMP
				MOVM  STRING, CADENA_DEST
VOLVER:			INSERT_C 00H 
				INC	  APUNTADOR_CAD
				LOOP VOLVER
				JMP   RECORRER1
FIN:		    RET
SET_STR			ENDP

INSERTAR_C 		PROC NEAR
				PUSHA
				MOV AX, APUNTADOR_CAD								; Si está al final del String, no ejecuta la acción.
				CMP AX, LONG_STRING1
				JE SALE_C
				LIMPIAR CADENA_AUX, LONG_AUX
				RESTAM CANT_CAR, APUNTADOR_CAD
				MOV BX, APUNTADOR_CAD
				COPIAR_CAD CADENA_DEST[BX], CADENA_AUX, LONG_COP
				COPIAR_CAD CARACTER, CADENA_DEST[BX], 1
				COPIAR_CAD CADENA_AUX, CADENA_DEST[BX+1], LONG_COP
				LIMPIAR CADENA_AUX, LONG_AUX
				INC CANT_CAR
SALE_C:			POPA
				RET
INSERTAR_C		ENDP

INSERTAR_NULL	PROC NEAR
				PUSHA
				MOV AX, APUNTADOR_CAD								; Si está al final del String, no ejecuta la acción.
				CMP AX, LONG_STRING1
				JE SALE_NULL
				LIMPIAR CADENA_AUX, LONG_AUX
				RESTAM CANT_CAR, APUNTADOR_CAD
				MOV BX, APUNTADOR_CAD
				COPIAR_CAD CADENA_DEST[BX], CADENA_AUX, LONG_COP
				COPIAR_CAD CARACTER_NULL, CADENA_DEST[BX], LONG_COP
				ADD BX, LONG_COP
				COPIAR_CAD CADENA_AUX, CADENA_DEST[BX], LONG_COP
				LIMPIAR CADENA_AUX, LONG_AUX
				INC CANT_CAR
SALE_NULL:		POPA
				RET
INSERTAR_NULL	ENDP


		;DESP CADENA_DEST
		;CALL INSERTAR_C
		;INSERTAR_CAD S_2_INS, LONG_STRING2
		;CALL BACKSPACE
		;CALL SUPRIMIR
		;CALL CORTAR_CAD
		;CALL TABULADOR
		;CALL MOVC_UP
		;CALL MOVC_DOWN
		;CALL MOVC_IZ
		;CALL BACKSPACE
		;CALL SUPRIMIR
		;CALL COPIA_CAD
		;DESP CADENA_COPIAR
		;INSERTAR_CAD CARACTER, LONG_CAR
		;DESP CADENA_PRUEBA
		;COPIAR_CAD CADENA_PRUEBA, CADENA_DEST, 95
		;MOV APUNTADOR_CAD, 5
		;CALL CORTAR_CAD
		;CALL PEGA_CAD
		;CALL TABULADOR
		;MOV APUNTADOR_CAD, 0
		;SET_CUR 00, 00, 00
		;CALL NEGRITAS
		;SET_CUR 00, 00, 24
		;MOV AH, 09H
		;MOV AL, 2AH
		;MOV BH, 0
		;MOV BL, 01011010B
		;MOV CX, 5
		;INT 10H
		;CALL MOVC_UP
		;CALL HOME_STR
		;CALL END_STR
		;CALL MOVC_IZ
		;CALL MOVC_DER
		;CALL INSERTAR_C
		;MOVM CANT_CARP, CANT_CAR
		;CALL REND_CAD
		;CALL SET_STR
		;DESP CADENA_DEST
		;DESP CADENA_PRUEBA
		;GET_CUR 0